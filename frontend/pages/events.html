<!doctype html><html>
  <head>
    <meta charset="utf-8"><title>Events</title><link rel="stylesheet" href="../css/style.css">
  </head>
<body>
<nav><a href="index.html">Home</a></nav>
<div class="container">
  <h2>Events</h2>
  <div id="events"></div>
  <h3>Create Event (Alumni)</h3>
  <form id="evForm">
    <input id="title" placeholder="Title" required>
    <input id="date" type="date" required>
    <textarea id="desc" placeholder="Description"></textarea>
    <button type="submit">Create</button>
  </form>
</div>
<script>
const api = "http://localhost:5000/api";
async function loadEvents(){
  const res = await fetch(api + '/events/');
  const data = await res.json();
  const container = document.getElementById('events');
  container.innerHTML = data.map(e => `<div><h4>${e.event_title}</h4><p>${e.event_description}</p><small>${e.event_date}</small></div>`).join('');
}
document.getElementById('evForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const token = localStorage.getItem('token');
  const payload = { event_title: document.getElementById('title').value, event_date: document.getElementById('date').value, event_description: document.getElementById('desc').value };
  const res = await fetch(api + '/events/', { method:'POST', headers: {'Content-Type':'application/json', 'Authorization': token? 'Bearer ' + token : ''}, body: JSON.stringify(payload)});
  const data = await res.json();
  alert(JSON.stringify(data));
  loadEvents();
});
loadEvents();
</script>
</body></html>
